<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>

<head>

    <script src="https://unpkg.com/ipfs-api@9.0.0/dist/index.js" integrity="sha384-5bXRcW9kyxxnSMbOoHzraqa7Z0PQWIao+cgeg327zit1hz5LZCEbIMx/LWKPReuB" crossorigin="anonymous">
    </script>
    <script>
        var ipfs = window.IpfsApi({
            host: 'localhost',
            port: '5001',
            protocol: 'http'
        })
    </script>
    <script>
        //Функция самой отправки данных
        function test(data) {
            data = window.btoa(data);
            //console.log(data);
            const files = [{
                path: 'huinia',
                content: data
            }]

            ipfs.files.add(files, function(err, files) {
                if (err) console.log(err);
                else console.log(files);
            })
        }
    </script>
</head>

<body>
    minimalism
    <div>
        <input type="file" id="test" onchange="handleFiles(this.files)" placeholder="Въеби сюда что бы загрузить файл">
    </div>
    <script>
        let img;
        const inputElement = document.getElementById("test");
        inputElement.addEventListener("change", handleFiles, false);

        function handleFiles() {
            let fileList = this.files;
            const reader = new FileReader();
            reader.onload = function(data) {
                //всё отправляем
                test(data.target.result);

            };
            reader.readAsBinaryString(fileList[0]);
        }
    </script>
</body>

</html>